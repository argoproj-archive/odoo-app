---
type: workflow
version: 1
name: create-volume-if-not-exists
description: Creates a volume if it does not exist
inputs:
  parameters:
    VOL_NAME:
    VOL_SIZE:
steps:
- create_if_not_exists:
    template: volume-tools-base
    arguments:
      parameters.VOL_NAME:
      parameters.VOL_SIZE:
      parameters.STORAGE_CLASS:
---
type: container
version: 1
name: volume-tools-base
description: This is the base template for volume-tools-tests
resources:
  mem_mib: 64
  cpu_cores: 0.1
image: argoproj/volume_tools:v1.1
command: ['volume_tools create --volume-name %%inputs.parameters.VOL_NAME%% --volume-size-gb %%inputs.parameters.VOL_SIZE%% --storage-class %%inputs.parameters.STORAGE_CLASS%%']
inputs:
  parameters:
    VOL_NAME:
    VOL_SIZE:
        default: '1'
    STORAGE_CLASS:
        default: 'ssd'

